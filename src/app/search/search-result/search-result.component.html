<div class="container-fluid animated slideInDown" style="background: #a7a495;">
  <!-- <ngx-loading [show]="loading" [config]="{ fullScreenBackdrop: true }"></ngx-loading> -->
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h1 style="margin-top: 10px;" class="font-size-l">{{'home.breadcrumb.search' | translate}}</h1>
        <hr class="hr-custom2">
        <ul class="list-inline" style="clear:both;">
          <li>
            <a class="font-size-s" href="/index/">
              {{'home.menu.home' | translate }}
            </a>
          </li>
          <li>/</li>
          <li>
            {{'home.breadcrumb.search' | translate}}
          </li>
        </ul>
      </div>
    </div>
  </div> 
</div>
<div class="container search"> 
  <div class="row">
    <div class="col-md-3" style="padding-top:10px;padding-left: 0px;padding-right: 0px;">
      <div style="background-color: #f5f5f5">
        <div *ngIf="tabIndex==0 || tabIndex==1">          
          <ul class="side-menu-list">
            <li style="padding: 10px;">
              <header class="font-size-s;" style="cursor: pointer;" (click)="sKeyword = !sKeyword">
                <span>
                    {{'home.search.keywordset' | translate}}
                  <i class="fa fa-angle-right pull-right" *ngIf="!sKeyword" style="font-size: 1.5em;"></i>
                  <i class="fa fa-angle-down  pull-right" *ngIf="sKeyword" style="font-size: 1.5em;"></i>
                </span>
              </header>
              <div *ngIf="sKeyword" style="margin-top: 10px; margin-bottom: 10px;">
                  <mat-radio-group class="example-radio-group" [(ngModel)]="chkKeyValue" >
                      <mat-radio-button class="example-radio-button" (change)="chkKeyword($event,1)" value="1">
                          {{'home.search.exword' | translate}}
                      </mat-radio-button>
                      <mat-form-field class="example-full-width" *ngIf="chkKeyValue==1" style="padding-left: 15px;">
                          <input matInput placeholder="Type Exclude words" [(ngModel)]="inpExcWord">
                      </mat-form-field>
                      <mat-radio-button class="example-radio-button" (change)="chkKeyword($event,2)" value="2">
                          {{'home.search.alword' | translate}}
                      </mat-radio-button>
                      <mat-form-field class="example-full-width" *ngIf="chkKeyValue==2" style="padding-left: 15px;">
                          <input matInput placeholder="Type Exclude words" [(ngModel)]="inpExcWord">
                      </mat-form-field>
                      <mat-radio-button class="example-radio-button" (change)="chkKeyword($event,3)" value="3">
                          {{'home.search.anyword' | translate}}
                      </mat-radio-button>
                      <mat-form-field class="example-full-width" *ngIf="chkKeyValue==3" style="padding-left: 15px;">
                          <input matInput placeholder="Type Exclude words" [(ngModel)]="inpExcWord">
                      </mat-form-field>                  
                    </mat-radio-group>  
              </div>              
            </li>            
            <li style="padding: 10px;">
              <header (click)="sSpeci = !sSpeci;" class="font-size-m;" class="font-size-s;" style="cursor: pointer;">
                <span>{{'home.search.specification' | translate}}
                  <i class="fa fa-angle-right pull-right" *ngIf="!sSpeci" style="font-size: 1.5em;"></i>
                  <i class="fa fa-angle-down  pull-right" *ngIf="sSpeci" style="font-size: 1.5em;"></i>
                </span>
              </header>
              <ul class="side-menu-list" *ngIf="sSpeci && tabIndex==0" style="margin-top: 10px;">
                <li>
                  <mat-checkbox class="example-margin" (change)="chkSpeci($event,'content_topic')" [(ngModel)]="chktopic">
                    <span class="font-size-s">
                        {{'home.search.spectopic' | translate}}</span>
                  </mat-checkbox>
                </li>
                <li>
                  <mat-checkbox class="example-margin" (change)="chkSpeci($event,'content_sub_topic')" [(ngModel)]="chksubtopic">
                    <span class="font-size-s">
                        {{'home.search.specsubtopic' | translate}}</span>
                  </mat-checkbox>
                </li>
                <li>
                  <mat-checkbox class="example-margin" (change)="chkSpeci($event,'content_title')" [(ngModel)]="chktitle">
                    <span class="font-size-s">
                        {{'home.search.spectitle' | translate}}</span>
                  </mat-checkbox>
                </li>
                <li>
                  <mat-checkbox class="example-margin" (change)="chkSpeci($event,'content_description')" [(ngModel)]="chkdes">
                    <span class="font-size-s">
                        {{'home.search.specdes' | translate}}</span>
                  </mat-checkbox>
                </li>
              </ul>
              <ul class="side-menu-list" *ngIf="sSpeci && tabIndex==1" style="margin-top: 10px;">
                  <li>
                    <mat-checkbox class="example-margin" (change)="chkSpeci($event,'ministry_name')" [(ngModel)]="chkosminis">
                      <span class="font-size-s">
                          {{'home.search.specminis' | translate}}</span>
                    </mat-checkbox>
                  </li>
                  <li>
                    <mat-checkbox class="example-margin" (change)="chkSpeci($event,'agency_name')" [(ngModel)]="chkosagency">
                      <span class="font-size-s">
                          {{'home.search.specagen' | translate}}</span>
                    </mat-checkbox>
                  </li>
                  <li>
                    <mat-checkbox class="example-margin" (change)="chkSpeci($event,'title')" [(ngModel)]="chkostitle">
                      <span class="font-size-s">
                          {{'home.search.spectitle' | translate}}</span>
                    </mat-checkbox>
                  </li>
                  <li>
                    <mat-checkbox class="example-margin" (change)="chkSpeci($event,'description')" [(ngModel)]="chkosdes">
                      <span class="font-size-s">
                          {{'home.search.specdes' | translate}}</span>
                    </mat-checkbox>
                  </li>
                </ul>
            </li>
            <li style="padding: 10px;">
              <header (click)="sFilter = !sFilter" class="font-size-s;" style="cursor: pointer;">
                <span>{{'home.search.filter' | translate}}
                  <i class="fa fa-angle-right pull-right" *ngIf="!sFilter" style="font-size: 1.5em;"></i>
                  <i class="fa fa-angle-down  pull-right" *ngIf="sFilter" style="font-size: 1.5em;"></i>
                </span>
              </header>
              <ul class="side-menu-list" *ngIf="sFilter && tabIndex==0" style="margin-top: 10px;">
                <li>
                  <mat-form-field class="font-size-s" style="width:100%;">
                    <mat-select placeholder="{{'home.search.filmonth' | translate}}" (change)="chkmonpub($event)" [(ngModel)]="valMonPub" multiple>
                      <mat-select-trigger>
                        {{selMonPubDisp}}
                        <span *ngIf="valMonPub?.length > 1" class="example-additional-selection">
                          (+{{valMonPub.length - 1}} others)
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let i of ddmonthPub" [value]="i.name" style="width:90%">
                        <span>{{i.name | date:'MMMM yyyy'}}</span>&nbsp;<span class="pull-right">({{i.val}})</span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </li>
                <li *ngIf="chktopic">
                  <mat-form-field class="font-size-s example-full-width">
                    <mat-select placeholder="{{'home.search.filtop' | translate}}" (change)="chkfiltrtopic($event)" [(ngModel)]="valTopic" multiple>
                      <mat-select-trigger>
                        {{selTopicDisp}}
                        <span *ngIf="valTopic?.length > 1" class="example-additional-selection pull-right">
                          (+{{valTopic.length - 1}} others)
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let i of ddtopics" [value]="i.name" class="example-full-width" style="width: 100vw">
                        {{i.name}}
                        <span class="pull-right">&nbsp;({{i.val}})</span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </li>
                <li *ngIf="chksubtopic">
                  <mat-form-field class="font-size-s example-full-width">
                    <mat-select placeholder="{{'home.search.filsubtopic' | translate}}" (change)="chksubtop($event)" [(ngModel)]="valSubTopic" multiple>
                      <mat-select-trigger>
                        {{selSubTopicDisp}}
                        <span *ngIf="valSubTopic?.length > 1" class="example-additional-selection">
                          (+{{valSubTopic.length - 1}} others)
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let i of ddsubTopics" [value]="i.name" class="example-full-width" style="width: 100vw">
                        {{i.name}}
                        <span class="pull-right">&nbsp;({{i.val}})</span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </li>
              </ul>
              <ul class="side-menu-list" *ngIf="sFilter && tabIndex==1" style="margin-top: 10px;">
                <li *ngIf="chkosminis">
                  <mat-form-field class="font-size-s" style="width:100%;">
                    <mat-select placeholder="{{'home.search.specminis' | translate}}" (change)="chkministry($event)" [(ngModel)]="valMinistry" multiple>
                      <mat-select-trigger>
                        {{selMinisDisp}}
                        <span *ngIf="valMinistry?.length > 1" class="example-additional-selection">
                          (+{{valMinistry.length - 1}} others)
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let i of ddministry" [value]="i.name" >
                        {{i.name}}&nbsp;
                        <span class="pull-right">({{i.val}})</span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </li>
                <li *ngIf="chkosagency">
                  <mat-form-field class="font-size-s" style="width:100%;">
                    <mat-select placeholder="{{'home.search.specagen' | translate}}" (change)="chkagency($event)" [(ngModel)]="valAgency" multiple>
                      <mat-select-trigger>
                        {{selAgencyDisp}}
                        <span *ngIf="valAgency?.length > 1" class="example-additional-selection">
                          (+{{valAgency.length - 1}} others)
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let i of ddagency" [value]="i.name" >
                        {{i.name}}&nbsp;
                        <span class="pull-right">({{i.val}})</span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </li>
              </ul>              
            </li>
            <li style="padding: 10px;" *ngIf="sKeyword || sSpeci || sFilter">
                <div>
                  <button [disabled]="locUnchecked >= 4 || osUnchecked >= 4?'true':'false'" class="btn btn-md" mat-raised-button color="primary" (click)="btnSubmit()">
                  <i [class]="sharedService.icon.check"></i> Submit</button>
                  <button mat-raised-button color="warn" (click)="btnFilterReset()"><i [class]="sharedService.icon.refresh"></i> Reset</button>
                </div>
            </li>
          </ul>
        </div>
        <div *ngIf="tabIndex==2">  
            <ul class="side-menu-list">
                <li style="padding: 10px;">
                    <header class="font-size-s;">
                      <span>
                          {{'home.search.specification' | translate}}
                      </span>
                    </header>
                    <div style="margin-top: 10px; margin-bottom: 10px;">
                        <mat-radio-group class="example-radio-group" [(ngModel)]="chkGlobValue">
                            <mat-radio-button [checked]="gval === 'gov.my'?'true': 'false'" *ngFor="let gval of dataGlobe" class="example-radio-button" (change)="changeGlob($event, gval)" value="{{ gval }}">
                                {{gval}}
                            </mat-radio-button>                       
                        </mat-radio-group>  
                    </div>              
                  </li>
            </ul>
        </div>
      </div>
      <!-- <button class="btn btn-md" mat-raised-button (click)="checkCurrObj()">CHECK</button> -->
    </div>
    <div class="col-md-9">   
      <h3 class="font-size-l">
          <b>{{'home.search.searchresult' | translate}}</b>
        </h3>  
         <div class="example-full-width">
            <mat-form-field class="example-full-width">
              <input type="text" class="inputser example-full-width" matInput placeholder="Search here" [(ngModel)]="ser_word" (keyup.enter)="resetPage();searchByKeyword(ser_word)">
              <mat-icon matSuffix (click)="resetPage(); searchByKeyword(ser_word)" style="cursor:pointer;"><i class="fa fa-search"></i></mat-icon>
              <!-- <mat-icon matSuffix *ngIf="ser_word.length>0" (click)="ser_word=''" style="cursor:pointer;"><i class="fa fa-times"></i></mat-icon> -->
            </mat-form-field>            
          </div>
      
      <mat-tab-group #tabGroup (selectedTabChange)="changeTab($event)">
          <mat-tab label="{{'home.search.local' | translate}}" >
            <div style="padding-top:5px;" *ngIf="totalElements>0">
                {{totalElements | number:'2.0'}} {{'home.search.resultsfound' | translate}} {{millisec}} ms
            </div> 
              <ul class="intSearch" *ngIf="tabIndex==0">
                  <li *ngFor="let int of intData; let i = index;">
                    <int-search [showdata]="int" [indx]="i" [keyw]='ser_word' [tabInx]='tabIndex' [pageNo]="(pageNumber == 1)?(i + 1):((pageNumber * pagesize)-pagesize)+(i+1)" ></int-search>
                  </li>
                </ul>
          </mat-tab>
          <mat-tab label="{{'home.search.onlineser' | translate}}">
              <div style="padding-top:5px;" *ngIf="totalElements>0">
                  {{totalElements | number:'2.0'}} {{'home.search.resultsfound' | translate}} {{millisec}} ms
              </div>  
              <ul class="intSearch" *ngIf="tabIndex==1">
                  <li *ngFor="let int of intData; let i = index;">
                    <int-search [showdata]="int" [indx]="i" [keyw]='ser_word' [tabInx]='tabIndex' [pageNo]="(pageNumber == 1)?(i + 1):((pageNumber * pagesize)-pagesize)+(i+1)"></int-search>
                  </li>
                </ul>
          </mat-tab>
          <mat-tab label="{{'home.search.global' | translate}}"> 
            <div style="padding-top:5px;" *ngIf="totalElements>0">
                {{totalElements  | number:'2.0'}} {{'home.search.searchresult' | translate}}
            </div> 
            <ul class="intSearch" *ngIf="tabIndex==2">
                <li *ngFor="let int of intData; let i = index;">
                  <int-search [showdata]="int" [indx]="i" [keyw]='ser_word' [tabInx]='tabIndex' [pageNo]="(pageNumber == 1)?(i + 1):((pageNumber * pagesize)-pagesize)+(i+1)"></int-search>
                </li>
              </ul>
          </mat-tab>
        </mat-tab-group>

        <div *ngIf="showNoData" class="row text-align-Center padding-20"> {{ 'common.msg.nodata' | translate }} </div>

        <div class="float-right paddingTop-15">
          <mat-form-field *ngIf="tabIndex!=2" class="table_footer_pagecount" style="display: inline-block; position: relative; text-align: left;">
            <mat-select class="font-size-s text-align-Center" [(ngModel)]="pagesize" (change)="pageChange($event)">
              <mat-option *ngFor="let pgcount of sharedService.pageSize" [value]="pgcount.size">{{pgcount.size}}</mat-option>
            </mat-select>
          </mat-form-field>
          <span class="float-right">
            <span class="table_footer_pagination">{{ 'common.pagination.pages' | translate }}
              <strong>{{pageNumber}}</strong> {{ 'common.pagination.of' | translate }}
              <strong>{{totalPages}}</strong> {{ 'common.pagination.in' | translate }}
              <strong>{{totalElements | number:'2.0'}}</strong> {{'home.search.result' | translate}}     </span>
            <button mat-mini-fab color="basic" [disabled]="noPrevData" (click)="paginatorL()">
              <i [ngClass]="sharedService.icon.arrLeft" aria-hidden="true"></i>
            </button>
            <button mat-mini-fab color="basic" [disabled]="noNextData" (click)="paginatorR()">
              <i [ngClass]="sharedService.icon.arrRight" aria-hidden="true"></i>
            </button>
          </span>
        </div>
    </div>
  </div>
</div>
